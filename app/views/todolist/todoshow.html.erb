<h1>Todo Details</h1>

<div>
  <strong>Title:</strong>
  <h2><%= @todo.title %></h2>
</div>

<div>
  <strong>Description:</strong>
  <h2><%= @todo.description %></h2>
</div>

<% @todo.todo_lists.each_with_index do |todo_list, outer_index| %>
  <div>
    <h1><%= outer_index+1 %></h1>
    <strong>Latitude:</strong>
    <p><%= todo_list.latitude %></p>
  </div>
  <div>
    <strong>Longitude:</strong>
    <p><%= todo_list.longitude %></p>
  </div>
  <div>
    <strong>Details:</strong>
    <p><%= todo_list.details %></p>
  </div>
<% end %>

<h2>Comments</h2>

<% if logged_in? %>
  <div>
    <%= form_with(model: [@todo, @todo.comments.build], local: true) do |form| %>
      <div class="form-group">
        <%= form.label :comment %>
        <%= form.text_area :comment, class: "form-control", rows: 3 %>
      </div>
      <div class="form-group">
        <%= form.submit "Post Comment", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
<% else %>
  <p>Please <a href="<%= login_path %>">log in</a> to post a comment.</p>
<% end %>

<h3>Existing Comments</h3>
<% @todo.comments.each do |comment| %>
  <div>
    <strong><%= comment.user.name %>:</strong>
    <p><%= comment.comment %></p>
    <p><small><%= comment.created_at.strftime("%Y-%m-%d %H:%M:%S") %></small></p>
  </div>
<% end %>
